{
    "name":"test",
    "version":1.0,
    "resources":
    {
        "textures":
        [
            {
                "name":"flower1",
                "frameCount":75,
                "frameWidth":150,
                "frameHeight":150
            },
            {
                "name":"snow",
                "frameCount":1,
                "frameWidth":200,
                "frameHeight":200
            }
            
        ]
    },
    "define":
    {
        "camera":
        {
            "type":"perspective",
            "lookX":0,
            "lookY":0,
            "lookZ":-1,
            "positionX":0,
            "positionY":0,
            "positionZ":0,
            "upX":0,
            "upY":1,
            "upZ":0,
            "near":5,
            "far":10000
        },
        "objects":
        {
            "snow1":
            {
                "sprite":
                {
                    "texture":"snow",
                    "frameIndex":0,
                    "width":40,
                    "height":40
                },
                "life":20,
                "rotation":0,
                "positionX":"last_positionX",
                "positionY":"last_positionY-t*40",
                "positionZ":"last_positionZ"
            },
            "snow":
            {
                "sprite":
                {
                    "texture":"snow",
                    "frameIndex":0,
                    "width":40,
                    "height":40
                },
                "life":20,
                "rotation":0,
                "positionX":"rand0%1000-500",
                "positionY":"last_positionY-t*40",
                "positionZ":"rand2%1000-500"
            },
            "snowGun":
            {
                "emitter":
                {
                    "emitRate":100,
                    "emitObjects":
                    [
                        "snow"
                    ]
                },
                "rotation":0,
                "positionX":0,
                "positionY":100,
                "positionZ":0
            }

        }
    },
    "stages":
    [
        {
            "name":"stage1",
            "events":
            {
                "tap":
                {
                    "action":
                    {
                        "type":"change_stage",
                        "target":"stage2"
                    }
                }

            },
            "enter_stage":
            {
                "add":
                [
                    {
                        "group":"aa",
                        "object":"snowGun"
                    }
                ]
            },
            "leave_stage":
            {
                "remove":
                [
                    {
                        "group":"aa",
                        "object":"snowGun"
                    }
                ]
            }
        },
        {
            "name":"stage2",
            "define":
            {
                "snow":
                {
                    "positionY":"last_positionY"
                },
                "snow1":
                {
                    "positionY":"last_positionY"
                }
            },
            "events":
            {
                "tap":
                {
                    "action":
                    {
                        "type":"change_stage",
                        "target":"stage3"
                    }
                }

            }
        },
        {
            "name":"stage3",
            "define":
            {
                "snow":
                {
                    "emitter":
                    {
                        "emitRate":100,
                        "emitObjects":
                        [
                            "snow1"
                        ],
                        "emitCount":1
                    },
                    "positionY":"last_positionY"
                },
                "snow1":
                {
                    "positionX":"last_positionX+t*20",
                    "positionY":"last_positionY",
                    "positionZ":"last_positionZ"
                }
            },
            "events":
            {
                "delay":
                {
                    "time":1,
                    "action":
                    { 
                        "type":"change_stage",
                        "target":"stage4"
                    }
                }
            }
        },
        {
            "name":"stage4",
            "define":
            {
                "snow":
                {
                    "emitter":
                    {
                        "emitRate":0
                    },
                    "positionX":"last_positionX",
                    "positionY":"last_positionY",
                    "positionZ":"last_positionZ"
                },
                "snow1":
                {
                    "positionX":"last_positionX",
                    "positionY":"last_positionY",
                    "positionZ":"last_positionZ"
                }
            },
            "events":
            {
                "tap":
                {
                    "action":
                    {
                        "type":"change_stage",
                        "target":"stage1"
                    }
                }
            },
            "leave_stage":
            {
                "resetObjects":
                {

                }
            }
        }
    ]
    
}
